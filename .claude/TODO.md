# TODO リスト

最終更新: 2025-11-17

---

## ✅ 完了済み（Phase 1: Phina.js → Phaser 3 移植）

### 調査・設計

- [x] 元のPhina.jsリポジトリの完全な分析
- [x] 現在の実装との比較
- [x] 移植失敗箇所の特定
- [x] Phina.js → Phaser 3 完全マッピングドキュメント作成（`docs/PHINA_TO_PHASER_MAPPING.md`）

### コア実装

- [x] すべてのスプライトクラスの実装（`src/game/Sprites.ts`）
  - [x] RingSprites - 42pxグリッドスナッピング、Expo.easeOut
  - [x] BackgroundSprites - 3層同時アニメーション
  - [x] KanjiSprites - 4層複雑アニメーション
  - [x] MonSprites - エラスティック回転
  - [x] ScoresSprites - 段階的表示（0ms/500ms/1000ms）
  - [x] CurrentScoreSprites - 連続フェード
  - [x] TotalScoreSprites - 筆文字数字表示

### MainScene完全書き換え

- [x] 古い配列ベースのリング管理を削除
- [x] 新しいスプライトクラスへの移行
- [x] すべてのゲームモードの実装
- [x] タイミング精度の修正
- [x] 効果音同期の実装

### アセット

- [x] すべてのアセットのロード追加
  - [x] 35種類の漢字画像
  - [x] 14種類の紋画像
  - [x] ライン画像
  - [x] mod値画像
  - [x] ダミー画像

### ビルド・品質

- [x] TypeScriptエラーの解消
- [x] ESLintエラーの解消（no-explicit-any対応）
- [x] Prettierフォーマット適用
- [x] ビルド成功確認

### ドキュメント

- [x] プロジェクト管理ドキュメント作成（`.claude/CLAUDE.md`）
- [x] TODOリスト作成（このファイル）
- [x] コミット＆プッシュ完了

---

## 🔄 進行中（Phase 2: テスト・検証）

### 実機テスト

- [ ] **ブラウザで実際に動作確認**
  - URL: http://localhost:3000/cee-lo-rings/
  - [ ] ゲーム起動確認
  - [ ] スロット停止精度確認
  - [ ] 背景アニメーション確認
  - [ ] 装飾スプライト確認
  - [ ] スコア表示確認
  - [ ] 効果音確認

### 元実装との比較

- [ ] **元のPhina.js版と並べて比較**
  - 元URL: https://kako-jun.github.io/tin-tilo-rings/phinajs/
  - [ ] 見た目の一致確認
  - [ ] 動きの一致確認
  - [ ] タイミングの一致確認
  - [ ] 効果音の一致確認

### バグ修正

- [ ] ブラウザコンソールエラーの確認
- [ ] 発見されたバグの修正

---

## 📋 未着手（Phase 3: 改善・最適化）

### 優先度：高

#### 機能完全性

- [ ] **全9ルールのテスト**
  - [ ] rule_1_2943（時間制限：2943点）
  - [ ] rule_1_8390（時間制限：8390点）
  - [ ] rule_1_37654（時間制限：37654点）
  - [ ] rule_2_2943（回数制限：29/43回）
  - [ ] rule_2_8390（回数制限：83/90回）
  - [ ] rule_2_37654（回数制限）
  - [ ] rule_3_0409（スコアアタック：409秒）
  - [ ] rule_3_2009（スコアアタック：2009秒）
  - [ ] rule_3_6819（スコアアタック：6819秒）

- [ ] **特殊機能のテスト**
  - [ ] リーチ表示（2リング停止時）
  - [ ] ゾーンモード
    - [ ] バレットタイム（速度半減、30秒）
    - [ ] レボリューション（スコア2倍、30秒）
  - [ ] トリプルセブン効果
    - [ ] all_1（全リング1のみ）
    - [ ] all_6（全リング6のみ）
    - [ ] all_123（リング1,2,3）
    - [ ] all_456（リング4,5,6）
    - [ ] triplets（ゾロ目頻出）
    - [ ] rollback（リーチ時再回転）
  - [ ] ピンクリボン（リングがピンク色に）
  - [ ] アンビュランス（時間10秒戻る）

- [ ] **20種類の役のテスト**
  - Multi系（7種）
    - [ ] ピンゾロ [1,1,1] - ×5
    - [ ] アラシカブ [3,3,3] - ×3
    - [ ] ケモノ [6,6,6] - ×(-6)
    - [ ] トリプルセブン [7,7,7] - ×7
    - [ ] ゾロ目 - ×2
    - [ ] シゴロ [4,5,6] - ×2
    - [ ] ヒフミ [1,2,3] - ×2
  - Add系（3種）
    - [ ] ピンクリボン [1,0,9] - +109
    - [ ] ピンバサミ [1,?,1] - +10
    - [ ] メ（2つ同じ） - +5
  - Kabu系（10種）
    - [ ] ピン (mod=1) - +10
    - [ ] ニゾウ (mod=2) - +9
    - [ ] サンタ (mod=3) - +8
    - [ ] ヨツヤ (mod=4) - +7
    - [ ] ゴケ (mod=5) - +6
    - [ ] ロッポウ (mod=6) - +5
    - [ ] シチケン (mod=7) - +4
    - [ ] オイチョ (mod=8) - +3
    - [ ] カブ (mod=9) - +2
    - [ ] ブタ（役なし） - 0

#### パフォーマンス

- [ ] Lighthouseスコア測定
- [ ] Chrome DevToolsプロファイリング
- [ ] メモリリーク確認
- [ ] 60fps維持確認

### 優先度：中

#### UI/UX改善

- [ ] ローディング画面の追加
- [ ] アセット読み込みプログレスバー
- [ ] エラーハンドリング強化
- [ ] リザルト画面の詳細化
  - [ ] 全役の統計表示
  - [ ] グラフ表示
  - [ ] ハイスコアとの比較

#### モバイル対応

- [ ] タッチ操作の最適化
- [ ] レスポンシブデザイン
- [ ] 画面サイズ対応（iPhone, iPad, Android）
- [ ] PWA化（オフライン対応）

#### 追加機能

- [ ] ハイスコアのローカルストレージ保存
- [ ] プレイ履歴の記録
- [ ] 統計画面（役の出現率など）
- [ ] チュートリアル追加

### 優先度：低

#### 国際化

- [ ] 英語対応
  - [ ] UI文言
  - [ ] ゲームルール説明
  - [ ] ヘルプテキスト

#### ソーシャル

- [ ] スコアのTwitterシェア
- [ ] リプレイ機能
- [ ] ランキング機能（要バックエンド）

#### アニメーション強化

- [ ] パーティクルエフェクト追加
- [ ] より派手な演出
- [ ] トランジション改善

---

## 🐛 既知の問題

現在、既知の問題はありません。
実機テスト後に発見された問題をここに記録します。

### バグテンプレート

```markdown
- [ ] **【優先度】問題のタイトル**
  - **現象:** 何が起こるか
  - **再現手順:** 1. ... 2. ... 3. ...
  - **期待する動作:** どうあるべきか
  - **原因:** （調査中/特定済み）
  - **修正方針:** どう直すか
```

---

## 📝 メモ・アイデア

### 技術的メモ

- Phaser 3の`tweens.timeline()`を使えば、複雑なシーケンスをより簡潔に書ける可能性
- `displayWidth`/`displayHeight`の代わりに`scale`を使う方が軽量かも
- スプライトシートを使えばロード時間短縮できる

### ゲームデザインアイデア

- ダブルアップチャンス機能（高リスク・高リターン）
- アチーブメントシステム
- デイリーチャレンジ
- マルチプレイヤーモード（要検討）

### アート・サウンド

- より高解像度の画像
- 追加BGM
- ボイス追加（「リーチ！」「ピンゾロ！」など）

---

## 🎯 マイルストーン

### Milestone 1: 完全移植 ✅

**期限:** 2025-11-17
**ステータス:** 完了

- すべてのスプライトクラス実装
- MainScene完全書き換え
- ビルド成功
- ドキュメント整備

### Milestone 2: 動作確認 🔄

**期限:** 2025-11-18
**ステータス:** 進行中

- 実機テスト完了
- 元実装との比較完了
- バグ修正完了

### Milestone 3: 本番デプロイ

**期限:** 2025-11-20
**ステータス:** 未着手

- GitHub Pagesデプロイ
- README更新
- プルリクエスト作成

### Milestone 4: 改善フェーズ

**期限:** 2025-12-01
**ステータス:** 未着手

- パフォーマンス最適化
- モバイル対応
- 追加機能実装

---

## 🔍 レビュー項目

コミット前に確認すること：

### コード品質

- [ ] `npm run build` - エラーなし
- [ ] `npm run lint` - 警告なし
- [ ] `npm run format:check` - フォーマット済み
- [ ] TypeScript型エラーなし

### 動作確認

- [ ] 開発サーバーで動作確認
- [ ] ブラウザコンソールエラーなし
- [ ] 基本操作が正常動作

### ドキュメント

- [ ] コメント追加（複雑なロジック）
- [ ] CLAUDE.mdの更新（必要に応じて）
- [ ] TODO.mdの更新（このファイル）
- [ ] コミットメッセージが明確

---

## 📚 参考資料

### 移植作業

- `.claude/PORTING.md` - 移植作業の詳細記録
- `docs/PHINA_TO_PHASER_MAPPING.md` - フレームワーク対応表

### テスト

- `.claude/TESTING.md` - テスト項目・手順

### ゲーム仕様

- `docs/GAME_SPEC.md` - ゲーム仕様書
- `docs/ARCHITECTURE.md` - アーキテクチャドキュメント

---

**次のアクション:**

1. ブラウザで http://localhost:3000/cee-lo-rings/ を開く
2. 実際にプレイして動作確認
3. 問題があれば「🐛 既知の問題」に記録
4. 問題なければMilestone 2を完了にする
